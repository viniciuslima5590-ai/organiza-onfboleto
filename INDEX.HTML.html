<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WL Opera√ß√£o ‚Äì NF + Boleto</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'Segoe UI', Arial, sans-serif;
    background: #f0f4f5;
    min-height: 100vh;
  }

  /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
  .header {
    background: #fff;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 28px;
    border-bottom: 1px solid #e0e0e0;
  }
  .header-left {
    display: flex;
    align-items: center;
    gap: 12px;
  }
  .wl-logo {
    width: 48px; height: 48px;
    background: #1a3a5c;
    border-radius: 8px;
    display: flex; align-items: center; justify-content: center;
    font-weight: 900; font-size: 18px; color: #fff;
    letter-spacing: -1px;
  }
  .wl-logo span { color: #4dbfff; }
  .header-title {
    font-size: 15px; font-weight: 700;
    color: #1a3a5c; letter-spacing: 1px;
    text-transform: uppercase;
  }
  .header-right {
    display: flex; align-items: center; gap: 18px;
  }
  .logo-trigo {
    display: flex; align-items: center; gap: 6px;
    font-weight: 800; font-size: 18px; color: #2d2d2d; letter-spacing: 1px;
  }
  .logo-asv {
    display: flex; align-items: center; gap: 6px;
  }
  .asv-circle {
    width: 42px; height: 42px; border-radius: 50%;
    background: #7a3b1e;
    display: flex; align-items: center; justify-content: center;
    font-weight: 900; font-size: 13px; color: #fff;
    border: 3px solid #f0c08a;
  }
  .asv-text {
    font-size: 10px; font-weight: 700; color: #7a3b1e;
    line-height: 1.3; text-transform: uppercase;
  }

  /* ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ */
  .main {
    max-width: 820px;
    margin: 0 auto;
    padding: 32px 20px 60px;
  }

  .page-title {
    text-align: center;
    font-size: 26px;
    font-weight: 900;
    color: #1a1a1a;
    line-height: 1.2;
    margin-bottom: 28px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  /* ‚îÄ‚îÄ DROP ZONE ‚îÄ‚îÄ */
  .drop-zone {
    background: #e8ecee;
    border: 2px dashed #bfc8cc;
    border-radius: 14px;
    padding: 32px 20px;
    text-align: center;
    cursor: pointer;
    transition: border-color 0.2s, background 0.2s;
    margin-bottom: 24px;
  }
  .drop-zone.drag-over {
    border-color: #7a3b1e;
    background: #f3ece8;
  }
  .drop-label {
    font-size: 15px;
    color: #555;
    margin-bottom: 16px;
  }
  .btn-import {
    background: #7a3b1e;
    color: #fff;
    border: none;
    border-radius: 8px;
    padding: 13px 38px;
    font-size: 15px;
    font-weight: 700;
    cursor: pointer;
    transition: background 0.2s;
  }
  .btn-import:hover { background: #5e2c14; }
  input[type=file] { display: none; }

  /* ‚îÄ‚îÄ TWO COLUMNS ‚îÄ‚îÄ */
  .columns {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 18px;
    margin-bottom: 18px;
  }

  .file-panel {
    background: #fff;
    border-radius: 14px;
    border: 1px solid #dde3e6;
    overflow: hidden;
  }
  .panel-header {
    padding: 12px 18px 10px;
    font-size: 12px;
    font-weight: 800;
    letter-spacing: 1.5px;
    color: #666;
    text-transform: uppercase;
    border-bottom: 1px solid #eee;
  }
  .file-list {
    padding: 8px;
    min-height: 80px;
    max-height: 300px;
    overflow-y: auto;
  }
  .file-row {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 9px 10px;
    border-radius: 8px;
    background: #f7f2f0;
    margin-bottom: 6px;
    transition: background 0.15s;
  }
  .file-row:last-child { margin-bottom: 0; }
  .file-row:hover { background: #f0e8e4; }
  .pdf-icon {
    width: 32px; height: 32px;
    background: #c0604a;
    border-radius: 7px;
    display: flex; align-items: center; justify-content: center;
    font-size: 15px; flex-shrink: 0;
    color: #fff;
  }
  .file-name {
    font-size: 13px;
    color: #333;
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  .rm-btn {
    color: #bbb;
    font-size: 18px;
    cursor: pointer;
    line-height: 1;
    flex-shrink: 0;
    padding: 0 2px;
    font-weight: 700;
  }
  .rm-btn:hover { color: #c0604a; }
  .empty-hint {
    text-align: center;
    color: #aaa;
    font-size: 12px;
    padding: 20px 0;
  }

  /* ‚îÄ‚îÄ BOTTOM ROW ‚îÄ‚îÄ */
  .bottom-row {
    display: flex;
    align-items: center;
    gap: 16px;
  }
  .progress-wrap {
    flex: 1;
    background: #dde3e6;
    border-radius: 99px;
    height: 8px;
    overflow: hidden;
  }
  .progress-bar {
    height: 100%;
    width: 0%;
    background: #7a3b1e;
    border-radius: 99px;
    transition: width 0.3s;
  }
  .btn-process {
    background: #7a3b1e;
    color: #fff;
    border: none;
    border-radius: 10px;
    padding: 15px 28px;
    font-size: 15px;
    font-weight: 800;
    cursor: pointer;
    transition: background 0.2s;
    white-space: nowrap;
    line-height: 1.3;
    text-align: center;
  }
  .btn-process:hover:not(:disabled) { background: #5e2c14; }
  .btn-process:disabled { opacity: 0.45; cursor: not-allowed; }

  /* ‚îÄ‚îÄ LOG BOX ‚îÄ‚îÄ */
  .log-box {
    display: none;
    background: #1e1e1e;
    color: #d4d4d4;
    border-radius: 10px;
    padding: 14px 16px;
    font-family: monospace;
    font-size: 12px;
    max-height: 180px;
    overflow-y: auto;
    margin-top: 20px;
    line-height: 1.7;
  }
  .log-box.visible { display: block; }
  .log-ok { color: #4ec9a3; margin-right: 6px; }
  .log-warn { color: #f0c05a; margin-right: 6px; }
  .log-err { color: #f47b67; margin-right: 6px; }
  .log-dot { color: #888; margin-right: 6px; }

  /* ‚îÄ‚îÄ RESULTS ‚îÄ‚îÄ */
  .results-section { display: none; margin-top: 28px; }
  .results-section.visible { display: block; }
  .results-title { font-size: 16px; font-weight: 800; color: #1a1a1a; margin-bottom: 14px; text-transform: uppercase; }
  .stats-bar { display: flex; gap: 14px; margin-bottom: 18px; }
  .stat-card { background: #fff; border-radius: 10px; border: 1px solid #dde3e6; padding: 14px 20px; flex: 1; text-align: center; }
  .stat-num { font-size: 28px; font-weight: 900; }
  .stat-label { font-size: 11px; color: #888; margin-top: 2px; text-transform: uppercase; letter-spacing: 0.5px; }
  .result-list { display: flex; flex-direction: column; gap: 8px; }
  .result-item { background: #fff; border-radius: 10px; border: 1px solid #dde3e6; padding: 12px 16px; display: flex; align-items: center; gap: 12px; }
  .result-item.unmatched { border-color: #f5d6cc; background: #fff8f6; }
  .result-badge { width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 13px; font-weight: 900; flex-shrink: 0; }
  .badge-ok { background: #e0f7ef; color: #2d8a6a; }
  .badge-warn { background: #fdeee8; color: #c0604a; }
  .result-info { flex: 1; }
  .result-nf { font-size: 13px; font-weight: 700; color: #222; }
  .result-detail { font-size: 11px; color: #888; margin-top: 2px; }
  .btn-dl { background: #1a3a5c; color: #fff; text-decoration: none; border-radius: 6px; padding: 7px 14px; font-size: 12px; font-weight: 700; white-space: nowrap; }
  .btn-dl:hover { background: #0f2440; }
  .btn-dl-all { background: #7a3b1e; color: #fff; border: none; border-radius: 8px; padding: 12px 28px; font-size: 14px; font-weight: 800; cursor: pointer; margin-top: 14px; }
  .btn-dl-all:hover { background: #5e2c14; }
  .btn-dl-all:disabled { opacity: 0.5; cursor: not-allowed; }
</style>
</head>
<body>

<!-- HEADER -->
<header class="header">
  <div class="header-left">
    <div class="wl-logo">W<span>L</span></div>
    <div class="header-title">Opera√ß√£o</div>
  </div>
  <div class="header-right">
    <div class="logo-trigo">üåø TRIGO</div>
    <div class="logo-asv">
      <div class="asv-circle">ASV</div>
      <div class="asv-text">A√ß√£o<br>Sustent√°vel<br>da Amaz√¥nia</div>
    </div>
  </div>
</header>

<!-- MAIN -->
<div class="main">

  <h1 class="page-title">Organiza√ß√£o e Agrupamento de<br>Notas Fiscais e Boletos</h1>

  <!-- DROP ZONE -->
  <div class="drop-zone" id="dropZone"
    ondragover="event.preventDefault(); this.classList.add('drag-over')"
    ondragleave="this.classList.remove('drag-over')"
    ondrop="handleDrop(event)">
    <div class="drop-label">Arraste seus arquivos PDF aqui ou clique para selecionar</div>
    <button class="btn-import" onclick="document.getElementById('fileInput').click()">
      Importar Arquivos
    </button>
    <input type="file" id="fileInput" multiple accept=".pdf" onchange="handleFileInput(event)">
  </div>

  <!-- TWO COLUMNS -->
  <div class="columns">
    <div class="file-panel">
      <div class="panel-header">Notas Fiscais</div>
      <div class="file-list" id="nfList">
        <div class="empty-hint" id="nfEmpty">Nenhuma NF carregada</div>
      </div>
    </div>
    <div class="file-panel">
      <div class="panel-header">Boletos</div>
      <div class="file-list" id="boletoList">
        <div class="empty-hint" id="boletoEmpty">Nenhum boleto carregado</div>
      </div>
    </div>
  </div>

  <!-- BOTTOM ROW -->
  <div class="bottom-row">
    <div class="progress-wrap">
      <div class="progress-bar" id="progressBar"></div>
    </div>
    <button class="btn-process" id="btnProcess" disabled onclick="processFiles()">
      Processar e<br>Organizar
    </button>
  </div>

  <!-- LOG -->
  <div class="log-box" id="logBox"></div>

  <!-- RESULTS -->
  <div class="results-section" id="resultsSection">
    <div class="results-title">üìÑ Arquivos Gerados</div>
    <div class="stats-bar" id="statsBar"></div>
    <div class="result-list" id="resultList"></div>
    <button class="btn-dl-all" id="btnDlAll" onclick="downloadAll()">‚¨á Baixar Todos (.zip)</button>
  </div>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script>
let nfFiles = [];
let boletoFiles = [];
let generatedFiles = [];

function classifyFile(name) {
  const n = name.toLowerCase();
  if (n.includes('boleto')) return 'boleto';
  return 'nf'; // danfe, nf-, nota, or unknown ‚Üí NF side
}

function formatDate(file) {
  return new Date(file.lastModified).toLocaleDateString('pt-BR');
}

async function handleDrop(e) {
  e.preventDefault();
  document.getElementById('dropZone').classList.remove('drag-over');
  await addFiles(Array.from(e.dataTransfer.files).filter(f => f.name.endsWith('.pdf')));
}

async function handleFileInput(e) {
  await addFiles(Array.from(e.target.files));
  e.target.value = '';
}

async function addFiles(files) {
  for (const f of files) {
    const bytes = await readFileAsUint8Array(f);
    const obj = { name: f.name, bytes, date: formatDate(f) };
    if (classifyFile(f.name) === 'boleto') {
      if (!boletoFiles.find(x => x.name === f.name)) boletoFiles.push(obj);
    } else {
      if (!nfFiles.find(x => x.name === f.name)) nfFiles.push(obj);
    }
  }
  renderLists();
  checkReady();
}

function renderLists() {
  renderPanel('nfList', 'nfEmpty', nfFiles, 'removeNF');
  renderPanel('boletoList', 'boletoEmpty', boletoFiles, 'removeBoleto');
}

function renderPanel(listId, emptyId, arr, fnName) {
  const list = document.getElementById(listId);
  list.querySelectorAll('.file-row').forEach(el => el.remove());
  document.getElementById(emptyId).style.display = arr.length ? 'none' : '';

  arr.forEach(f => {
    const row = document.createElement('div');
    row.className = 'file-row';
    const short = f.name.length > 22 ? f.name.slice(0, 20) + '‚Ä¶' : f.name;
    row.innerHTML = `
      <div class="pdf-icon">üìÑ</div>
      <span class="file-name" title="${f.name}">${short} ¬∑ ${f.date}</span>
      <span class="rm-btn" onclick="${fnName}('${CSS.escape(f.name)}')">√ó</span>
    `;
    list.appendChild(row);
  });
}

function removeNF(name) { nfFiles = nfFiles.filter(f => f.name !== name); renderLists(); checkReady(); }
function removeBoleto(name) { boletoFiles = boletoFiles.filter(f => f.name !== name); renderLists(); checkReady(); }

function checkReady() {
  document.getElementById('btnProcess').disabled = !(nfFiles.length && boletoFiles.length);
}

function readFileAsUint8Array(file) {
  return new Promise((res, rej) => {
    const r = new FileReader();
    r.onload = e => res(new Uint8Array(e.target.result));
    r.onerror = rej;
    r.readAsArrayBuffer(file);
  });
}

function log(msg, type = 'dot') {
  const box = document.getElementById('logBox');
  box.classList.add('visible');
  const icons = { dot: '¬∑', ok: '‚úì', warn: '‚ö†', err: '‚úó' };
  const d = document.createElement('div');
  d.innerHTML = `<span class="log-${type}">${icons[type]}</span>${msg}`;
  box.appendChild(d);
  box.scrollTop = box.scrollHeight;
}

function setProgress(pct) {
  document.getElementById('progressBar').style.width = pct + '%';
}

async function loadLibs() {
  if (window.PDFLib && window.pdfjsLib) return;
  await Promise.all([
    loadScript('https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js'),
    loadScript('https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js')
  ]);
  pdfjsLib.GlobalWorkerOptions.workerSrc =
    'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
}

function loadScript(src) {
  return new Promise((res, rej) => {
    if (document.querySelector(`script[src="${src}"]`)) { res(); return; }
    const s = document.createElement('script');
    s.src = src; s.onload = res; s.onerror = rej;
    document.head.appendChild(s);
  });
}

async function extractPagesText(uint8array) {
  const pdf = await pdfjsLib.getDocument({ data: uint8array.slice(0) }).promise;
  const pages = [];
  for (let i = 1; i <= pdf.numPages; i++) {
    const page = await pdf.getPage(i);
    const tc = await page.getTextContent();
    pages.push(tc.items.map(i => i.str).join(' '));
  }
  return pages;
}

function extractNFNumber(text) {
  const patterns = [
    /\bN\.\s*(\d{6,9})\b/,
    /NOTA\s+FISCAL\s+(\d{6,9})\s+S[√âE]RIE/i,
    /NF-e\s*\n?\s*N\.\s*(\d{6,9})/i,
  ];
  for (const p of patterns) { const m = text.match(p); if (m) return m[1]; }
  return null;
}

function extractNroDoc(text) {
  const patterns = [
    /Nro\.?\s*Documento[^\d]{0,30}(?:\d\s+)?(\d{6,9})\b/i,
    /N[√∫u]mero\s+(?:do\s+)?Documento[^\d]{0,30}(?:\d\s+)?(\d{6,9})\b/i,
  ];
  for (const p of patterns) { const m = text.match(p); if (m) return m[1]; }
  return null;
}

function extractValue(text) {
  const patterns = [
    /VALOR\s+(?:DO\s+)?(?:DOCUMENT[O]?|BOLETO|COBRAN[C√á]A)\s*[:\-]?\s*R?\$?\s*([\d\.]+,\d{2})/i,
    /VALOR\s+TOTAL\s*[:\-]?\s*R?\$?\s*([\d\.]+,\d{2})/i,
    /R\$\s*([\d\.]+,\d{2})/,
  ];
  for (const p of patterns) { const m = text.match(p); if (m) return parseFloat(m[1].replace(/\./g,'').replace(',','.')); }
  return null;
}

async function splitNFPdf(fileObj) {
  const pages = await extractPagesText(fileObj.bytes);
  const groups = [];
  let current = null;
  for (let i = 0; i < pages.length; i++) {
    const nfNum = extractNFNumber(pages[i]);
    const val = extractValue(pages[i]);
    if (!current) {
      current = { nfNum, value: val, pageIndices: [i] };
    } else if (nfNum && nfNum !== current.nfNum) {
      groups.push(current);
      current = { nfNum, value: val, pageIndices: [i] };
    } else {
      current.pageIndices.push(i);
      if (!current.value && val) current.value = val;
    }
  }
  if (current) groups.push(current);

  const result = [];
  for (const g of groups) {
    const subDoc = await PDFLib.PDFDocument.create();
    const srcDoc = await PDFLib.PDFDocument.load(fileObj.bytes.slice(0));
    const copied = await subDoc.copyPages(srcDoc, g.pageIndices);
    copied.forEach(p => subDoc.addPage(p));
    result.push({ nfNum: g.nfNum, value: g.value, pdfBytes: await subDoc.save() });
  }
  return result;
}

async function processFiles() {
  const btn = document.getElementById('btnProcess');
  btn.disabled = true;
  btn.innerHTML = '‚è≥ Processando...';
  generatedFiles = [];

  document.getElementById('logBox').innerHTML = '';
  document.getElementById('logBox').classList.add('visible');
  document.getElementById('resultsSection').classList.remove('visible');
  setProgress(0);

  try {
    await loadLibs();
    log('Bibliotecas carregadas', 'ok');
    setProgress(5);

    const allNFs = [];
    for (const f of nfFiles) {
      log(`Processando: ${f.name}...`);
      const groups = await splitNFPdf(f);
      log(`  ‚Üí ${groups.length} NF(s) encontrada(s)`, 'ok');
      allNFs.push(...groups);
    }
    log(`Total: ${allNFs.length} nota(s)`, 'ok');
    setProgress(40);

    log(`Lendo ${boletoFiles.length} boleto(s)...`);
    const boletos = [];
    for (const bf of boletoFiles) {
      const pages = await extractPagesText(bf.bytes);
      const text = pages.join(' ');
      const nroDoc = extractNroDoc(text);
      const val = extractValue(text);
      boletos.push({ name: bf.name, bytes: bf.bytes, nroDoc, value: val });
      log(`  ${bf.name} ‚Üí Nro Doc: ${nroDoc || '‚ö† n√£o detectado'}`, nroDoc ? 'ok' : 'warn');
    }
    setProgress(70);

    log('Vinculando NFs aos boletos...');
    let matched = 0, unmatched = 0;

    for (const nf of allNFs) {
      let boletoMatch = null, matchMethod = '';

      if (nf.nfNum) {
        const nfStr = nf.nfNum.replace(/^0+/, '');
        boletoMatch = boletos.find(b => {
          if (!b.nroDoc) return false;
          return b.nroDoc.replace(/^0+/, '') === nfStr || b.nroDoc === nf.nfNum;
        });
        if (boletoMatch) matchMethod = 'Nro Documento';
      }
      if (!boletoMatch && nf.value != null) {
        boletoMatch = boletos.find(b => b.value != null && Math.abs(b.value - nf.value) < 0.02);
        if (boletoMatch) matchMethod = 'valor';
      }

      if (boletoMatch) {
        const merged = await PDFLib.PDFDocument.create();
        const srcNF = await PDFLib.PDFDocument.load(nf.pdfBytes.slice(0));
        (await merged.copyPages(srcNF, srcNF.getPageIndices())).forEach(p => merged.addPage(p));
        const srcB = await PDFLib.PDFDocument.load(boletoMatch.bytes.slice(0));
        (await merged.copyPages(srcB, srcB.getPageIndices())).forEach(p => merged.addPage(p));
        const blob = new Blob([await merged.save()], { type: 'application/pdf' });
        generatedFiles.push({ name: `NF_${nf.nfNum}_com_boleto.pdf`, blob, matched: true, nfNum: nf.nfNum, boletoName: boletoMatch.name, matchMethod });
        log(`  ‚úì NF #${nf.nfNum} ‚Üê ${boletoMatch.name}`, 'ok');
        matched++;
      } else {
        const blob = new Blob([nf.pdfBytes], { type: 'application/pdf' });
        generatedFiles.push({ name: `NF_${nf.nfNum || 'sem_numero'}_SEM_BOLETO.pdf`, blob, matched: false, nfNum: nf.nfNum || '?', boletoName: null });
        log(`  ‚ö† NF #${nf.nfNum || '?'}: sem boleto`, 'warn');
        unmatched++;
      }
    }

    const usedB = new Set(generatedFiles.filter(g => g.boletoName).map(g => g.boletoName));
    boletos.filter(b => !usedB.has(b.name)).forEach(b => log(`  ‚ö† Boleto sem NF: ${b.name}`, 'warn'));

    setProgress(100);
    log(`‚îÄ‚îÄ‚îÄ Conclu√≠do: ${matched} vinculados, ${unmatched} sem boleto ‚îÄ‚îÄ‚îÄ`, 'ok');
    showResults(matched, unmatched, allNFs.length);

  } catch (err) {
    log(`Erro: ${err.message}`, 'err');
    console.error(err);
  }

  btn.disabled = false;
  btn.innerHTML = 'Processar e<br>Organizar';
}

function showResults(matched, unmatched, total) {
  document.getElementById('resultsSection').classList.add('visible');
  document.getElementById('statsBar').innerHTML = `
    <div class="stat-card"><div class="stat-num" style="color:#1a3a5c">${total}</div><div class="stat-label">NFs encontradas</div></div>
    <div class="stat-card"><div class="stat-num" style="color:#2d8a6a">${matched}</div><div class="stat-label">Vinculadas</div></div>
    <div class="stat-card"><div class="stat-num" style="color:${unmatched > 0 ? '#c0604a' : '#2d8a6a'}">${unmatched}</div><div class="stat-label">Sem boleto</div></div>
  `;
  const list = document.getElementById('resultList');
  list.innerHTML = '';
  generatedFiles.forEach(f => {
    const url = URL.createObjectURL(f.blob);
    const item = document.createElement('div');
    item.className = 'result-item' + (f.matched ? '' : ' unmatched');
    item.innerHTML = `
      <div class="result-badge ${f.matched ? 'badge-ok' : 'badge-warn'}">${f.matched ? '‚úì' : '‚ö†'}</div>
      <div class="result-info">
        <div class="result-nf">NF #${f.nfNum}${!f.matched ? ' ¬∑ <span style="color:#c0604a;font-size:10px">SEM BOLETO</span>' : ''}</div>
        <div class="result-detail">${f.matched ? '‚Üê ' + f.boletoName + ' ¬∑ via ' + f.matchMethod : 'Nenhum boleto correspondente'}</div>
      </div>
      <a class="btn-dl" href="${url}" download="${f.name}">‚¨á Baixar</a>
    `;
    list.appendChild(item);
  });
}

async function downloadAll() {
  if (!generatedFiles.length) return;
  const btn = document.getElementById('btnDlAll');
  btn.textContent = '‚è≥ Comprimindo...';
  btn.disabled = true;
  const zip = new JSZip();
  for (const f of generatedFiles) zip.file(f.name, await f.blob.arrayBuffer());
  const zipBlob = await zip.generateAsync({ type: 'blob', compression: 'DEFLATE' });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(zipBlob);
  a.download = 'NFs_com_Boletos.zip';
  a.click();
  btn.textContent = '‚¨á Baixar Todos (.zip)';
  btn.disabled = false;
}
</script>
</body>
</html>
